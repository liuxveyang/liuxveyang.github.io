<!DOCTYPE html>
<html lang="zh-cn">
	<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="liuxueyang">
<meta name="description" content="舊博客">
<meta name="generator" content="Hugo 0.48" />
<title>实验七——王爽…………我写的最长的一个汇编程序==</title>
<link rel="shortcut icon" href="https://liuxveyang.github.io/images/favicon.ico">
<link rel="stylesheet" href="https://liuxveyang.github.io/css/style.css">
<link rel="stylesheet" href="https://liuxveyang.github.io/css/highlight.css">



<link rel="stylesheet" href="https://liuxveyang.github.io/css/monosocialiconsfont.css">



<link href="https://liuxveyang.github.io/index.xml" rel="alternate" type="application/rss+xml" title="LXY Site" />


<meta property="og:title" content="实验七——王爽…………我写的最长的一个汇编程序==" />
<meta property="og:description" content="这是我到目前为止写的最长的汇编程序了。
assume cs:sad, ds:data, ss:stack stack segment stack ends data segment db &#39;1975&#39;, &#39;1976&#39;, &#39;1977&#39;, &#39;1978&#39;, &#39;1979&#39;, &#39;1980&#39;, &#39;1981&#39;, &#39;1982&#39;, &#39;1983&#39; db &#39;1984&#39;, &#39;1985&#39;, &#39;1986&#39;, &#39;1987&#39;, &#39;1988&#39;, &#39;1989&#39;, &#39;1990&#39;, &#39;1991&#39;, &#39;1992&#39; db &#39;1993&#39;, &#39;1994&#39;, &#39;1995&#39; ; 21 years -- 54h bytes dd 16, 22, 382, 1356, 2390, 8000, 16000, 24486, 50065, 97479, 140417, 197514 dd 345980, 590827, 803530, 1183000, 1843000, 2759000, 3753000, 4649000, 5937000 ; income in 21 years -- 54h bytes dw 3, 7, 9, 13, 28, 38, 130, 220, 476, 778, 1001, 1442, 2258, 2793, 4037, 5635, 8226 dw 11542, 14430, 15257, 17800 ; staff in 21 years -- 2ah bytes data ends table segment db 21 dup (&#39;year summ ne ?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://liuxveyang.github.io/posts/%E5%AE%9E%E9%AA%8C%E4%B8%83%E7%8E%8B%E7%88%BD%E6%88%91%E5%86%99%E7%9A%84%E6%9C%80%E9%95%BF%E7%9A%84%E4%B8%80%E4%B8%AA%E6%B1%87%E7%BC%96%E7%A8%8B%E5%BA%8F/" /><meta property="article:published_time" content="2013-10-06T00:20:00&#43;00:00"/>
<meta property="article:modified_time" content="2013-10-06T00:20:00&#43;00:00"/>


<meta itemprop="name" content="实验七——王爽…………我写的最长的一个汇编程序==">
<meta itemprop="description" content="这是我到目前为止写的最长的汇编程序了。
assume cs:sad, ds:data, ss:stack stack segment stack ends data segment db &#39;1975&#39;, &#39;1976&#39;, &#39;1977&#39;, &#39;1978&#39;, &#39;1979&#39;, &#39;1980&#39;, &#39;1981&#39;, &#39;1982&#39;, &#39;1983&#39; db &#39;1984&#39;, &#39;1985&#39;, &#39;1986&#39;, &#39;1987&#39;, &#39;1988&#39;, &#39;1989&#39;, &#39;1990&#39;, &#39;1991&#39;, &#39;1992&#39; db &#39;1993&#39;, &#39;1994&#39;, &#39;1995&#39; ; 21 years -- 54h bytes dd 16, 22, 382, 1356, 2390, 8000, 16000, 24486, 50065, 97479, 140417, 197514 dd 345980, 590827, 803530, 1183000, 1843000, 2759000, 3753000, 4649000, 5937000 ; income in 21 years -- 54h bytes dw 3, 7, 9, 13, 28, 38, 130, 220, 476, 778, 1001, 1442, 2258, 2793, 4037, 5635, 8226 dw 11542, 14430, 15257, 17800 ; staff in 21 years -- 2ah bytes data ends table segment db 21 dup (&#39;year summ ne ?">


<meta itemprop="datePublished" content="2013-10-06T00:20:00&#43;00:00" />
<meta itemprop="dateModified" content="2013-10-06T00:20:00&#43;00:00" />
<meta itemprop="wordCount" content="247">



<meta itemprop="keywords" content="masm," />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="实验七——王爽…………我写的最长的一个汇编程序=="/>
<meta name="twitter:description" content="这是我到目前为止写的最长的汇编程序了。
assume cs:sad, ds:data, ss:stack stack segment stack ends data segment db &#39;1975&#39;, &#39;1976&#39;, &#39;1977&#39;, &#39;1978&#39;, &#39;1979&#39;, &#39;1980&#39;, &#39;1981&#39;, &#39;1982&#39;, &#39;1983&#39; db &#39;1984&#39;, &#39;1985&#39;, &#39;1986&#39;, &#39;1987&#39;, &#39;1988&#39;, &#39;1989&#39;, &#39;1990&#39;, &#39;1991&#39;, &#39;1992&#39; db &#39;1993&#39;, &#39;1994&#39;, &#39;1995&#39; ; 21 years -- 54h bytes dd 16, 22, 382, 1356, 2390, 8000, 16000, 24486, 50065, 97479, 140417, 197514 dd 345980, 590827, 803530, 1183000, 1843000, 2759000, 3753000, 4649000, 5937000 ; income in 21 years -- 54h bytes dw 3, 7, 9, 13, 28, 38, 130, 220, 476, 778, 1001, 1442, 2258, 2793, 4037, 5635, 8226 dw 11542, 14430, 15257, 17800 ; staff in 21 years -- 2ah bytes data ends table segment db 21 dup (&#39;year summ ne ?"/>


    </head>
<body>
    <nav class="main-nav">
	
		<a href='https://liuxveyang.github.io'> <span class="arrow">←</span>Home</a>
	

	

	
		<a class="cta" href="https://liuxveyang.github.io/index.xml">Subscribe</a>
	
</nav>

    <section id="wrapper">
        
        
<article class="post">
    <header>
        <h1>实验七——王爽…………我写的最长的一个汇编程序==</h1>
        <h2 class="subtitle"></h2>
        <h2 class="headline">
        October 6, 2013
        <br>
        
        
            
                <a href="https://liuxveyang.github.io/tags/masm">masm</a>
            
        
        
        </h2>
    </header>
    <section id="post-body">
        <p>这是我到目前为止写的最长的汇编程序了。</p>

<pre><code>assume cs:sad, ds:data, ss:stack

stack segment
stack ends

data segment
    db '1975', '1976', '1977', '1978', '1979', '1980', '1981', '1982', '1983'
    db '1984', '1985', '1986', '1987', '1988', '1989', '1990', '1991', '1992'
  db '1993', '1994', '1995'
    ; 21 years -- 54h bytes

    dd 16, 22, 382, 1356, 2390, 8000, 16000, 24486, 50065, 97479, 140417, 197514
    dd 345980, 590827, 803530, 1183000, 1843000, 2759000, 3753000, 4649000, 5937000
    ; income in 21 years -- 54h bytes

    dw 3, 7, 9, 13, 28, 38, 130, 220, 476, 778, 1001, 1442, 2258, 2793, 4037, 5635, 8226
    dw 11542, 14430, 15257, 17800
    ; staff in 21 years -- 2ah bytes
data ends

table segment
    db 21 dup ('year summ ne ?? ')
table ends

sad segment
start:
    mov ax, table
    mov ds, ax
    mov ax, data
    mov es, ax
    mov di, 0
    mov bx, 0
    mov cx, 21
    mov si, 0
s:
    ; year
    mov ax, es:[di+0]
    mov ds:[bx+0], ax
    mov ax, es:[di+2]
    mov ds:[bx+2], ax

    mov ds:[bx+4], ' '
    
    ; income
    mov ax, es:[di+54h]
    mov ds:[bx+5], ax
    mov ax, es:[di+54h+2]
    mov ds:[bx+7], ax

    mov ds:[bx+9], ' '

    ; staff
    mov ax, es:[si+54h+54h]
    mov ds:[bx+0ah], ax

    mov ds:[bx+0ch], ' '

    ; average income
    mov ax, ds:[bx+5]
    mov dx, ds:[bx+7]
    div word ptr ds:[bx+0ah]
    mov ds:[bx+0dh], ax

    mov ds:[bx+0fh], ' '

    add di, 4
    ; the number of staff takes 2 bytes instead of 4!
    add si, 2
    add bx, 10h
    loop s

    mov ax, 4c00h
    int 21h
sad ends
end start
</code></pre>

<p>刚开始的错误是：没有注意到其实人数所占的字节是2个，步长设置成了4个，所以导致了做除法运算的时候出现了溢出。</p>

<p>程序运行对的那一刻，兴奋！</p>

<p>其实也不太难=_=</p>

    </section>
</article>

<footer id="post-meta" class="clearfix">
    
    <img class="avatar" src="https://liuxveyang.github.io/images/avatar.png">
    <div>
        <span class="dark">liuxueyang</span>
        <span>I am a learner. :P</span>
    </div>
    
    <section id="sharing">
        <a class="twitter" href="https://twitter.com/intent/tweet?text=https%3a%2f%2fliuxveyang.github.io%2fposts%2f%25E5%25AE%259E%25E9%25AA%258C%25E4%25B8%2583%25E7%258E%258B%25E7%2588%25BD%25E6%2588%2591%25E5%2586%2599%25E7%259A%2584%25E6%259C%2580%25E9%2595%25BF%25E7%259A%2584%25E4%25B8%2580%25E4%25B8%25AA%25E6%25B1%2587%25E7%25BC%2596%25E7%25A8%258B%25E5%25BA%258F%2f - %e5%ae%9e%e9%aa%8c%e4%b8%83%e2%80%94%e2%80%94%e7%8e%8b%e7%88%bd%e2%80%a6%e2%80%a6%e2%80%a6%e2%80%a6%e6%88%91%e5%86%99%e7%9a%84%e6%9c%80%e9%95%bf%e7%9a%84%e4%b8%80%e4%b8%aa%e6%b1%87%e7%bc%96%e7%a8%8b%e5%ba%8f%3d%3d "><span class="icon-twitter"> tweet</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>

    </section>
</footer>

<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "liuxveyang" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<ul id="post-list" class="archive readmore">
    <h3>Read more</h3>

    
    
    
        <li>
            <a href="/posts/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B06%E6%8A%80%E6%9C%AF%E7%B1%BB/">读书笔记6「技术类」<aside class="dates">May 14 2018</aside></a>
        </li>
    
        <li>
            <a href="/posts/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B05/">读书笔记5<aside class="dates">Apr 29 2018</aside></a>
        </li>
    
        <li>
            <a href="/posts/%E6%95%B4%E7%90%86%E5%8D%9A%E5%AE%A2/">整理博客<aside class="dates">Apr 29 2018</aside></a>
        </li>
    
        <li>
            <a href="/posts/2017-12-23-summary-for-2017/">2017 年结束了<aside class="dates">Dec 23 2017</aside></a>
        </li>
    
        <li>
            <a href="/posts/clustering/">Clustering<aside class="dates">May 17 2017</aside></a>
        </li>
    
        <li>
            <a href="/posts/building-roads-to-connect-cities/">Building Roads to Connect Cities<aside class="dates">May 17 2017</aside></a>
        </li>
    
        <li>
            <a href="/posts/detecting-anomalies-in-currency-exchange-rates/">Detecting Anomalies in Currency Exchange Rates<aside class="dates">May 17 2017</aside></a>
        </li>
    
        <li>
            <a href="/posts/computing-minimum-cost-of-a-flight/">Computing the Minimum Cost of a Flight<aside class="dates">May 17 2017</aside></a>
        </li>
    
        <li>
            <a href="/posts/checking-whether-a-graph-is-bipartite/">Checking whether a Graph is Bipartite<aside class="dates">May 17 2017</aside></a>
        </li>
    
        <li>
            <a href="/posts/computing-minimum-number-of-flight-segments/">Computing the Minimum Number of Flight Segments<aside class="dates">May 16 2017</aside></a>
        </li>
    
</ul>



        <footer id="footer">
    
        <div id="social">

	
	
    
    <a class="symbol" href="https://www.github.com/liuxueyang">
        circlegithub
    </a>
    


</div>

    
    <p class="small">
    
        © Copyright 2018 liuxueyang
    
    </p>
</footer>

    </section>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://liuxveyang.github.io/js/main.js"></script>
<script src="https://liuxveyang.github.io/js/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-125224924-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


</body>
</html>
